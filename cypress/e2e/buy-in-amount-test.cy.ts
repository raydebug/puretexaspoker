describe("Buy-in Amount Bug Test", () => { beforeEach(() => { cy.visit("/"); cy.setCookie("playerNickname", "BuyInTestPlayer"); cy.get("[data-testid=\"lobby-container\"]").should("be.visible"); cy.get("[data-testid=\"table-row\"]").should("have.length.greaterThan", 0); }); it("should display correct chip amount based on selected buy-in (not hardcoded $1000)", () => { const playerName = "BuyInBugTest"; cy.get("[data-testid=\"table-row\"]").first().click(); cy.get("[data-testid=\"nickname-input\"]").clear().type(playerName); cy.get("[data-testid=\"join-as-observer\"]").click(); cy.get("[data-testid=\"observer-view\"]", { timeout: 10000 }).should("be.visible"); cy.get("[data-testid^=\"available-seat-\"]").first().click(); cy.get("[data-testid=\"confirm-seat-btn\"]").should("be.visible"); cy.get("[data-testid=\"buyin-dropdown\"] option").eq(0).then($option => { const selectedBuyIn = parseInt($option.val()); cy.get("[data-testid=\"buyin-dropdown\"]").select($option.val()); cy.get("[data-testid=\"confirm-seat-btn\"]").click(); cy.get("[data-testid=\"poker-table\"]").within(() => { cy.contains(playerName).should("be.visible"); cy.contains(playerName).parent().within(() => { cy.contains("$1000").should("not.exist"); cy.contains(`$${selectedBuyIn}`).should("be.visible"); }); }); }); }); });
